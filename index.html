<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' 'unsafe-eval' https:">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <title>TTE NETWORK | Enterprise Blockchain Platform</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Space+Grotesk:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        /* CSS保持不变，确保不缺少任何样式 */
        :root {
            --primary: #0A0A0F;
            --secondary: #1C1C28;
            --accent: #6C5CE7;
            --accent-light: #A29BFE;
            --accent-gradient: linear-gradient(135deg, #6C5CE7 0%, #00CEC9 100%);
            --text-primary: #FFFFFF;
            --text-secondary: #A0A0B0;
            --text-tertiary: #6A6A80;
            --success: #00D4A0;
            --warning: #FFB74D;
            --error: #FF5C7C;
            --card-bg: rgba(28, 28, 40, 0.9);
            --border: rgba(255, 255, 255, 0.08);
            --border-highlight: rgba(108, 92, 231, 0.4);
            --shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            --shadow-hover: 0 20px 60px rgba(0, 0, 0, 0.5);
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        /* 完整CSS内容... (确保所有CSS都存在) */
        /* 由于CSS很长，这里不重复，确保使用完整版本的CSS */
    </style>
    <script>
        // 添加一个简单的浏览器兼容性检查
        window.addEventListener('DOMContentLoaded', function() {
            // 检查必要的Web API支持
            const requiredAPIs = [
                'addEventListener',
                'querySelectorAll',
                'classList',
                'localStorage'
            ];
            
            let missingAPIs = [];
            requiredAPIs.forEach(api => {
                if (!window[api]) {
                    missingAPIs.push(api);
                }
            });
            
            if (missingAPIs.length > 0) {
                console.warn('缺少必要的Web API:', missingAPIs);
                alert('您的浏览器版本可能过低，请使用现代浏览器如Chrome、Firefox或Edge的最新版本。');
            }
        });
    </script>
</head>
<body>
    <!-- HTML内容保持不变 -->
    <!-- 网格背景 -->
    <div class="grid-bg"></div>
    
    <!-- 导航栏 -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo" id="homeLink">
                <div class="logo-icon">TTE</div>
                <div class="logo-text">TTE NETWORK</div>
            </div>
            
            <div class="nav-menu">
                <a href="#dashboard" class="nav-link active">Dashboard</a>
                <a href="#bridge" class="nav-link">Cross-Chain Bridge</a>
                <a href="#staking" class="nav-link">Staking</a>
                <a href="#transactions" class="nav-link">Transactions</a>
                <a href="#explorer" class="nav-link">Block Explorer</a>
                <a href="#docs" class="nav-link">Documentation</a>
            </div>
            
            <div class="nav-actions">
                <!-- 语言选择器 -->
                <div class="language-selector">
                    <div class="lang-trigger" id="langTrigger">
                        <i class="fas fa-globe"></i>
                    </div>
                    <div class="lang-dropdown" id="langDropdown">
                        <div class="lang-option active" data-lang="en">
                            <div class="lang-flag flag-en"></div>
                            <span>English</span>
                        </div>
                        <div class="lang-option" data-lang="zh">
                            <div class="lang-flag flag-cn"></div>
                            <span>中文</span>
                        </div>
                    </div>
                </div>
                
                <button class="wallet-btn" id="connectWallet">
                    <i class="fas fa-wallet"></i>
                    <span id="walletText">Connect Wallet</span>
                </button>
            </div>
        </div>
    </nav>
    
    <!-- 主容器 -->
    <div class="main-container">
        <!-- 仪表板标题 -->
        <div class="dashboard-header" id="dashboard">
            <h1 id="mainTitle">Enterprise Blockchain Platform</h1>
            <p id="mainSubtitle">Secure, scalable, and interoperable blockchain network with institutional-grade security and advanced cross-chain capabilities</p>
        </div>
        
        <!-- 区块链状态卡片 -->
        <div class="chain-stats">
            <div class="stat-card floating" id="blockHeightCard">
                <div class="stat-header">
                    <div class="stat-title">
                        <div class="stat-icon">
                            <i class="fas fa-cube"></i>
                        </div>
                        Block Height
                    </div>
                    <div class="stat-change positive">
                        <i class="fas fa-arrow-up"></i>
                        +2.1%
                    </div>
                </div>
                <div class="stat-value" id="blockHeight">4,827,419</div>
                <div class="stat-subtitle">Last block: <span id="lastBlockTime">12 seconds ago</span></div>
            </div>
            
            <div class="stat-card floating" id="transactionsCard" style="animation-delay: 0.5s;">
                <div class="stat-header">
                    <div class="stat-title">
                        <div class="stat-icon">
                            <i class="fas fa-exchange-alt"></i>
                        </div>
                        Transactions
                    </div>
                    <div class="stat-change positive">
                        <i class="fas fa-arrow-up"></i>
                        +5.3%
                    </div>
                </div>
                <div class="stat-value" id="totalTxs">18.2M</div>
                <div class="stat-subtitle">24h volume: <span id="dailyVolume">284.7K TXs</span></div>
            </div>
            
            <div class="stat-card floating" id="tpsCard" style="animation-delay: 1s;">
                <div class="stat-header">
                    <div class="stat-title">
                        <div class="stat-icon">
                            <i class="fas fa-tachometer-alt"></i>
                        </div>
                        Network TPS
                    </div>
                    <div class="stat-change positive">
                        <i class="fas fa-arrow-up"></i>
                        +12.4%
                    </div>
                </div>
                <div class="stat-value" id="networkTps">2,847</div>
                <div class="stat-subtitle">Peak: <span id="peakTps">3,142 TPS</span></div>
            </div>
            
            <div class="stat-card floating" id="tvlCard" style="animation-delay: 1.5s;">
                <div class="stat-header">
                    <div class="stat-title">
                        <div class="stat-icon">
                            <i class="fas fa-lock"></i>
                        </div>
                        Total Value Locked
                    </div>
                    <div class="stat-change positive">
                        <i class="fas fa-arrow-up"></i>
                        +8.7%
                    </div>
                </div>
                <div class="stat-value" id="totalValueLocked">$142.8M</div>
                <div class="stat-subtitle">Across all protocols</div>
            </div>
        </div>
        
        <!-- 标签页导航 -->
        <div class="tabs-nav">
            <button class="tab-btn active" data-tab="bridge">Cross-Chain Bridge</button>
            <button class="tab-btn" data-tab="staking">TTE Staking</button>
            <button class="tab-btn" data-tab="transactions">Recent Transactions</button>
            <button class="tab-btn" data-tab="explorer">Block Explorer</button>
        </div>
        
        <!-- 跨链桥卡片 -->
        <div class="tab-content active" id="bridgeTab">
            <div class="bridge-card">
                <div class="card-header">
                    <div class="card-title">
                        <i class="fas fa-link"></i>
                        <span id="bridgeTitle">Cross-Chain Bridge</span>
                    </div>
                    <div class="card-actions">
                        <button class="action-btn" id="settingsBtn" title="Settings">
                            <i class="fas fa-cog"></i>
                        </button>
                        <button class="action-btn" id="historyBtn" title="Transaction History">
                            <i class="fas fa-history"></i>
                        </button>
                    </div>
                </div>
                
                <div class="bridge-content">
                    <div class="bridge-container">
                        <!-- 来源链 -->
                        <div class="chain-section">
                            <div class="section-header">
                                <div class="section-label" id="fromLabel">From</div>
                                <div class="balance" id="fromBalance">Balance: <span id="fromBalanceValue">12.85</span> TTE</div>
                            </div>
                            
                            <div class="chain-selector">
                                <div class="chain-icon" id="fromChainIcon" data-chain="eth">
                                    <i class="fab fa-ethereum"></i>
                                </div>
                                <div class="chain-details">
                                    <div class="chain-name" id="fromChainName">Ethereum</div>
                                    <div class="chain-address" id="fromChainAddress">Mainnet</div>
                                </div>
                                <div class="chain-actions">
                                    <button class="chain-action-btn" id="changeFromChain">
                                        <i class="fas fa-chevron-down"></i>
                                    </button>
                                </div>
                            </div>
                            
                            <div class="amount-input-container">
                                <label class="amount-label" id="amountLabel">Amount to Bridge</label>
                                <div class="amount-input-wrapper">
                                    <input type="number" class="amount-input" id="amountInput" placeholder="0.0" min="0" step="0.01" value="1.0">
                                    <div class="token-selector" id="tokenSelector">
                                        <div class="token-icon">T</div>
                                        <div class="token-info">
                                            <div class="token-name" id="selectedToken">TTE</div>
                                            <div class="token-balance" id="selectedTokenBalance">Balance: 12.85</div>
                                        </div>
                                        <i class="fas fa-chevron-down"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 交换箭头 -->
                        <div class="swap-arrow">
                            <div class="swap-line"></div>
                            <button class="swap-btn" id="swapChains">
                                <i class="fas fa-exchange-alt"></i>
                            </button>
                            <div class="swap-line"></div>
                        </div>
                        
                        <!-- 目标链 -->
                        <div class="chain-section">
                            <div class="section-header">
                                <div class="section-label" id="toLabel">To</div>
                                <div class="balance" id="toBalance">Balance: <span id="toBalanceValue">0.42</span> TTE</div>
                            </div>
                            
                            <div class="chain-selector">
                                <div class="chain-icon" id="toChainIcon" data-chain="tte">
                                    <i class="fas fa-cube"></i>
                                </div>
                                <div class="chain-details">
                                    <div class="chain-name" id="toChainName">TTE Network</div>
                                    <div class="chain-address" id="toChainAddress">Layer 1</div>
                                </div>
                                <div class="chain-actions">
                                    <button class="chain-action-btn" id="changeToChain">
                                        <i class="fas fa-chevron-down"></i>
                                    </button>
                                </div>
                            </div>
                            
                            <div class="amount-input-container">
                                <label class="amount-label" id="receiveLabel">You will receive</label>
                                <div class="amount-input-wrapper">
                                    <div class="amount-input" id="receiveAmount">0.995</div>
                                    <div class="token-selector">
                                        <div class="token-icon">T</div>
                                        <div class="token-info">
                                            <div class="token-name" id="receiveToken">TTE</div>
                                            <div class="token-balance">On TTE Network</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 桥接信息 -->
                    <div class="bridge-info">
                        <div class="info-row">
                            <div class="info-label">
                                <i class="fas fa-gas-pump"></i>
                                <span id="feeLabel">Bridge Fee</span>
                            </div>
                            <div class="info-value" id="bridgeFee">0.005 ETH</div>
                        </div>
                        <div class="info-row">
                            <div class="info-label">
                                <i class="fas fa-clock"></i>
                                <span id="timeLabel">Estimated Time</span>
                            </div>
                            <div class="info-value highlight" id="bridgeTime">~3 minutes</div>
                        </div>
                        <div class="info-row">
                            <div class="info-label">
                                <i class="fas fa-exchange-alt"></i>
                                <span id="rateLabel">Exchange Rate</span>
                            </div>
                            <div class="info-value" id="exchangeRate">1 TTE = 1 TTE</div>
                        </div>
                    </div>
                    
                    <!-- 桥接按钮 -->
                    <div class="bridge-action">
                        <button class="bridge-action-btn" id="bridgeButton">
                            <i class="fas fa-link"></i>
                            <span id="bridgeButtonText">Connect Wallet to Bridge</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 质押卡片 -->
        <div class="tab-content" id="stakingTab" style="display: none;">
            <div class="staking-card">
                <div class="card-header">
                    <div class="card-title">
                        <i class="fas fa-coins"></i>
                        <span id="stakingTitle">TTE Staking</span>
                    </div>
                    <div class="card-actions">
                        <button class="action-btn" id="stakingHistoryBtn" title="Staking History">
                            <i class="fas fa-history"></i>
                        </button>
                        <button class="action-btn" id="rewardsBtn" title="Claim Rewards">
                            <i class="fas fa-gift"></i>
                        </button>
                    </div>
                </div>
                
                <div class="staking-content">
                    <!-- 质押统计 -->
                    <div class="staking-stats">
                        <h3><i class="fas fa-chart-line"></i> <span id="statsTitle">Staking Statistics</span></h3>
                        
                        <div class="staking-stat">
                            <span class="staking-label" id="totalStakedLabel">Total TTE Staked</span>
                            <div class="staking-value" id="totalStakedValue">284.7M TTE</div>
                            <div class="staking-progress">
                                <div class="progress-bar" style="width: 65%"></div>
                            </div>
                        </div>
                        
                        <div class="staking-stat">
                            <span class="staking-label" id="apyLabel">Current APY</span>
                            <div class="staking-value" id="apyValue">12.4%</div>
                            <div class="staking-progress">
                                <div class="progress-bar" style="width: 80%"></div>
                            </div>
                        </div>
                        
                        <div class="staking-stat">
                            <span class="staking-label" id="validatorsLabel">Active Validators</span>
                            <div class="staking-value" id="validatorsValue">1,247</div>
                            <div class="staking-progress">
                                <div class="progress-bar" style="width: 75%"></div>
                            </div>
                        </div>
                        
                        <div class="staking-stat">
                            <span class="staking-label" id="rewardsLabel">Your Rewards</span>
                            <div class="staking-value" id="rewardsValue">12,845 TTE</div>
                            <div class="staking-progress">
                                <div class="progress-bar" style="width: 45%"></div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 质押表单 -->
                    <div class="staking-form">
                        <h3><i class="fas fa-wallet"></i> <span id="stakeFormTitle">Stake TTE</span></h3>
                        
                        <div class="form-group">
                            <label class="form-label" id="stakeAmountLabel">Amount to Stake</label>
                            <input type="number" class="staking-amount-input" id="stakeAmountInput" placeholder="0.0" min="0" step="0.01" value="100">
                        </div>
                        
                        <div class="staking-actions">
                            <button class="stake-btn" data-percent="25">25%</button>
                            <button class="stake-btn" data-percent="50">50%</button>
                            <button class="stake-btn" data-percent="75">75%</button>
                            <button class="stake-btn active" data-percent="100">MAX</button>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" id="durationLabel">Staking Duration</label>
                            <div class="duration-selector">
                                <div class="duration-option selected" data-months="1">
                                    <div class="duration-months">1 Month</div>
                                    <div class="duration-multiplier">1x Reward</div>
                                </div>
                                <div class="duration-option" data-months="3">
                                    <div class="duration-months">3 Months</div>
                                    <div class="duration-multiplier">1.4x Reward</div>
                                </div>
                                <div class="duration-option" data-months="6">
                                    <div class="duration-months">6 Months</div>
                                    <div class="duration-multiplier">2x Reward</div>
                                </div>
                                <div class="duration-option" data-months="12">
                                    <div class="duration-months">12 Months</div>
                                    <div class="duration-multiplier">3.2x Reward</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bridge-info">
                            <div class="info-row">
                                <div class="info-label">
                                    <i class="fas fa-percentage"></i>
                                    <span id="estApyLabel">Estimated APY</span>
                                </div>
                                <div class="info-value" id="estApyValue">12.4%</div>
                            </div>
                            <div class="info-row">
                                <div class="info-label">
                                    <i class="fas fa-calendar-alt"></i>
                                    <span id="lockPeriodLabel">Lock Period</span>
                                </div>
                                <div class="info-value" id="lockPeriodValue">30 Days</div>
                            </div>
                            <div class="info-row">
                                <div class="info-label">
                                    <i class="fas fa-coins"></i>
                                    <span id="estRewardsLabel">Estimated Rewards</span>
                                </div>
                                <div class="info-value highlight" id="estRewardsValue">12.4 TTE</div>
                            </div>
                        </div>
                        
                        <button class="stake-submit-btn" id="stakeSubmitBtn">
                            <i class="fas fa-lock"></i>
                            <span id="stakeSubmitText">Stake TTE</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 区块链交易详情 -->
        <div class="tab-content" id="transactionsTab" style="display: none;">
            <div class="transactions-section">
                <div class="transactions-header">
                    <div class="card-title">
                        <i class="fas fa-exchange-alt"></i>
                        <span id="transactionsTitle">Recent Transactions</span>
                    </div>
                    <div class="card-actions">
                        <button class="action-btn" id="refreshTransactionsBtn" title="Refresh">
                            <i class="fas fa-sync-alt"></i>
                        </button>
                    </div>
                </div>
                
                <div class="transactions-content">
                    <table class="transactions-table">
                        <thead>
                            <tr>
                                <th>Transaction Hash</th>
                                <th>Type</th>
                                <th>From</th>
                                <th>To</th>
                                <th>Amount</th>
                                <th>Status</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody id="transactionsTable">
                            <!-- 交易数据将通过JavaScript动态生成 -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <!-- 区块浏览器 -->
        <div class="tab-content" id="explorerTab" style="display: none;">
            <div class="explorer-card">
                <div class="card-header">
                    <div class="card-title">
                        <i class="fas fa-search"></i>
                        <span id="explorerTitle">Block Explorer</span>
                    </div>
                    <div class="card-actions">
                        <button class="action-btn" id="searchBlockBtn" title="Search Block">
                            <i class="fas fa-search"></i>
                        </button>
                    </div>
                </div>
                
                <div class="bridge-content">
                    <!-- 搜索区域 -->
                    <div class="chain-section" style="margin-bottom: 1.5rem;">
                        <div class="amount-input-container">
                            <label class="amount-label" id="explorerSearchLabel">Search by Transaction Hash, Block Height or Address</label>
                            <div class="amount-input-wrapper">
                                <input type="text" class="amount-input" id="explorerSearch" placeholder="Enter hash, block number or address...">
                                <button class="wallet-btn" id="explorerSearchBtn" style="min-width: 120px;">
                                    <i class="fas fa-search"></i>
                                    <span id="searchBtnText">Search</span>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 区块链信息 -->
                    <div class="bridge-info">
                        <div class="info-row">
                            <div class="info-label">
                                <i class="fas fa-cube"></i>
                                <span id="latestBlockLabel">Latest Block</span>
                            </div>
                            <div class="info-value" id="latestBlock">4,827,419</div>
                        </div>
                        <div class="info-row">
                            <div class="info-label">
                                <i class="fas fa-clock"></i>
                                <span id="blockTimeLabel">Block Time</span>
                            </div>
                            <div class="info-value" id="blockTimeValue">2.5 seconds</div>
                        </div>
                        <div class="info-row">
                            <div class="info-label">
                                <i class="fas fa-gas-pump"></i>
                                <span id="gasPriceLabel">Average Gas Price</span>
                            </div>
                            <div class="info-value" id="gasPriceValue">0.00000005 ETH</div>
                        </div>
                    </div>
                    
                    <!-- 最近区块 -->
                    <div class="transactions-section" style="margin-top: 2rem;">
                        <div class="transactions-header">
                            <div class="card-title">
                                <i class="fas fa-cubes"></i>
                                <span id="recentBlocksLabel">Recent Blocks</span>
                            </div>
                        </div>
                        
                        <div class="transactions-content">
                            <div class="blocks-table" id="blocksTable">
                                <!-- 区块数据将通过JavaScript动态生成 -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 页脚 -->
        <footer class="footer">
            <div class="footer-grid">
                <div>
                    <div class="footer-logo">TTE NETWORK</div>
                    <p class="footer-description" id="footerDescription">
                        A high-performance Layer 1 blockchain network with native RWA integration and cross-chain interoperability. 
                        Built for the future of decentralized finance and real-world asset tokenization.
                    </p>
                    <div class="social-links">
                        <a href="#" class="social-link">
                            <i class="fab fa-twitter"></i>
                        </a>
                        <a href="#" class="social-link">
                            <i class="fab fa-github"></i>
                        </a>
                        <a href="#" class="social-link">
                            <i class="fab fa-discord"></i>
                        </a>
                        <a href="#" class="social-link">
                            <i class="fab fa-telegram"></i>
                        </a>
                    </div>
                </div>
                
                <div>
                    <h3 class="footer-heading" id="networkHeading">Network</h3>
                    <ul class="footer-links">
                        <li><a href="#" id="footerExplorer">Block Explorer</a></li>
                        <li><a href="#" id="footerValidators">Validators</a></li>
                        <li><a href="#" id="footerGovernance">Governance</a></li>
                        <li><a href="#" id="footerStaking">Staking</a></li>
                    </ul>
                </div>
                
                <div>
                    <h3 class="footer-heading" id="developersHeading">Developers</h3>
                    <ul class="footer-links">
                        <li><a href="#" id="footerDocs">Documentation</a></li>
                        <li><a href="#" id="footerAPI">API Reference</a></li>
                        <li><a href="#" id="footerContracts">Smart Contracts</a></li>
                        <li><a href="#" id="footerGithub">GitHub</a></li>
                    </ul>
                </div>
                
                <div>
                    <h3 class="footer-heading" id="communityHeading">Community</h3>
                    <ul class="footer-links">
                        <li><a href="#" id="footerBlog">Blog</a></li>
                        <li><a href="#" id="footerForum">Forum</a></li>
                        <li><a href="#" id="footerGrants">Grants</a></li>
                        <li><a href="#" id="footerContact">Contact</a></li>
                    </ul>
                </div>
            </div>
            
            <div class="copyright">
                &copy; 2024 TTE NETWORK. <span id="copyrightText">All rights reserved. Enterprise-grade blockchain infrastructure.</span>
            </div>
        </footer>
    </div>
    
    <!-- 模态框 - 链选择 -->
    <div class="modal" id="chainModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title" id="chainModalTitle">Select Network</div>
                <button class="modal-close" id="closeChainModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="modal-list" id="chainList">
                    <!-- 链列表将通过JavaScript动态生成 -->
                </div>
            </div>
        </div>
    </div>
    
    <!-- 模态框 - 代币选择 -->
    <div class="modal" id="tokenModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title" id="tokenModalTitle">Select Token</div>
                <button class="modal-close" id="closeTokenModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="modal-list" id="tokenList">
                    <!-- 代币列表将通过JavaScript动态生成 -->
                </div>
            </div>
        </div>
    </div>
    
    <!-- 模态框 - 交易详情 -->
    <div class="modal" id="txDetailModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title" id="txDetailModalTitle">Transaction Details</div>
                <button class="modal-close" id="closeTxDetailModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="tx-details" id="txDetails">
                    <!-- 交易详情将通过JavaScript动态生成 -->
                </div>
            </div>
        </div>
    </div>
    
    <!-- 通知 -->
    <div class="notification" id="notification"></div>
    
    <!-- 脚本 -->
    <script>
        // 添加全局错误处理
        window.addEventListener('error', function(e) {
            console.error('JavaScript错误:', e.error);
            const notification = document.getElementById('notification');
            if (notification) {
                notification.className = 'notification error show';
                notification.innerHTML = `<i class="fas fa-exclamation-circle"></i> JavaScript错误: ${e.message}`;
                setTimeout(() => notification.classList.remove('show'), 5000);
            }
        });

        // 语言切换功能
        let currentLanguage = 'en';
        const translations = {
            en: {
                mainTitle: "Enterprise Blockchain Platform",
                mainSubtitle: "Secure, scalable, and interoperable blockchain network with institutional-grade security and advanced cross-chain capabilities",
                bridgeTitle: "Cross-Chain Bridge",
                fromLabel: "From",
                toLabel: "To",
                amountLabel: "Amount to Bridge",
                receiveLabel: "You will receive",
                feeLabel: "Bridge Fee",
                timeLabel: "Estimated Time",
                rateLabel: "Exchange Rate",
                bridgeButtonText: "Connect Wallet to Bridge",
                bridgeButtonTextConnected: "Bridge Assets",
                stakingTitle: "TTE Staking",
                statsTitle: "Staking Statistics",
                totalStakedLabel: "Total TTE Staked",
                apyLabel: "Current APY",
                validatorsLabel: "Active Validators",
                rewardsLabel: "Your Rewards",
                stakeFormTitle: "Stake TTE",
                stakeAmountLabel: "Amount to Stake",
                durationLabel: "Staking Duration",
                estApyLabel: "Estimated APY",
                lockPeriodLabel: "Lock Period",
                estRewardsLabel: "Estimated Rewards",
                stakeSubmitText: "Stake TTE",
                transactionsTitle: "Recent Transactions",
                explorerTitle: "Block Explorer",
                explorerSearchLabel: "Search by Transaction Hash, Block Height or Address",
                searchBtnText: "Search",
                latestBlockLabel: "Latest Block",
                blockTimeLabel: "Block Time",
                gasPriceLabel: "Average Gas Price",
                recentBlocksLabel: "Recent Blocks",
                footerDescription: "A high-performance Layer 1 blockchain network with native RWA integration and cross-chain interoperability. Built for the future of decentralized finance and real-world asset tokenization.",
                networkHeading: "Network",
                footerExplorer: "Block Explorer",
                footerValidators: "Validators",
                footerGovernance: "Governance",
                footerStaking: "Staking",
                developersHeading: "Developers",
                footerDocs: "Documentation",
                footerAPI: "API Reference",
                footerContracts: "Smart Contracts",
                footerGithub: "GitHub",
                communityHeading: "Community",
                footerBlog: "Blog",
                footerForum: "Forum",
                footerGrants: "Grants",
                footerContact: "Contact",
                copyrightText: "All rights reserved. Enterprise-grade blockchain infrastructure.",
                walletText: "Connect Wallet",
                connected: "Connected",
                processing: "Processing...",
                success: "Success!",
                bridgeSuccess: "Bridge transaction completed successfully",
                stakeSuccess: "TTE staked successfully",
                claimSuccess: "Rewards claimed successfully",
                error: "Error",
                connectWalletFirst: "Please connect your wallet first",
                enterValidAmount: "Please enter a valid amount",
                insufficientBalance: "Insufficient balance",
                noRewards: "No rewards to claim",
                chainModalTitle: "Select Network",
                tokenModalTitle: "Select Token",
                txDetailModalTitle: "Transaction Details",
                searchPlaceholder: "Enter hash, block number or address..."
            },
            zh: {
                mainTitle: "企业级区块链平台",
                mainSubtitle: "安全、可扩展且可互操作的区块链网络，具有机构级安全性和先进的跨链功能",
                bridgeTitle: "跨链桥",
                fromLabel: "来源链",
                toLabel: "目标链",
                amountLabel: "转移数量",
                receiveLabel: "您将收到",
                feeLabel: "跨链费用",
                timeLabel: "预计时间",
                rateLabel: "兑换汇率",
                bridgeButtonText: "连接钱包以跨链",
                bridgeButtonTextConnected: "执行跨链",
                stakingTitle: "TTE质押",
                statsTitle: "质押统计",
                totalStakedLabel: "总质押TTE",
                apyLabel: "当前年化收益率",
                validatorsLabel: "活跃验证者",
                rewardsLabel: "您的奖励",
                stakeFormTitle: "质押TTE",
                stakeAmountLabel: "质押数量",
                durationLabel: "质押期限",
                estApyLabel: "预计年化收益率",
                lockPeriodLabel: "锁定周期",
                estRewardsLabel: "预计奖励",
                stakeSubmitText: "质押TTE",
                transactionsTitle: "最近交易",
                explorerTitle: "区块浏览器",
                explorerSearchLabel: "搜索交易哈希、区块高度或地址",
                searchBtnText: "搜索",
                latestBlockLabel: "最新区块",
                blockTimeLabel: "出块时间",
                gasPriceLabel: "平均Gas价格",
                recentBlocksLabel: "最近区块",
                footerDescription: "一个具有原生RWA集成和跨链互操作性的高性能Layer 1区块链网络。为去中心化金融和现实世界资产代币化的未来而构建。",
                networkHeading: "网络",
                footerExplorer: "区块浏览器",
                footerValidators: "验证者",
                footerGovernance: "治理",
                footerStaking: "质押",
                developersHeading: "开发者",
                footerDocs: "文档",
                footerAPI: "API参考",
                footerContracts: "智能合约",
                footerGithub: "GitHub",
                communityHeading: "社区",
                footerBlog: "博客",
                footerForum: "论坛",
                footerGrants: "资助计划",
                footerContact: "联系我们",
                copyrightText: "保留所有权利。企业级区块链基础设施。",
                walletText: "连接钱包",
                connected: "已连接",
                processing: "处理中...",
                success: "成功!",
                bridgeSuccess: "跨链交易已完成",
                stakeSuccess: "TTE质押成功",
                claimSuccess: "奖励领取成功",
                error: "错误",
                connectWalletFirst: "请先连接钱包",
                enterValidAmount: "请输入有效数量",
                insufficientBalance: "余额不足",
                noRewards: "没有可领取的奖励",
                chainModalTitle: "选择网络",
                tokenModalTitle: "选择代币",
                txDetailModalTitle: "交易详情",
                searchPlaceholder: "输入哈希、区块号或地址..."
            }
        };

        // 简化的事件绑定函数，确保兼容性
        function addEvent(element, event, handler) {
            if (element && element.addEventListener) {
                element.addEventListener(event, handler);
            } else if (element && element.attachEvent) {
                element.attachEvent('on' + event, handler);
            } else if (element) {
                element['on' + event] = handler;
            }
        }

        function query(selector) {
            return document.querySelector(selector);
        }

        function queryAll(selector) {
            return document.querySelectorAll(selector);
        }

        // DOM加载完成后初始化
        document.addEventListener('DOMContentLoaded', function() {
            try {
                console.log('页面初始化开始...');
                
                // 初始化基本功能
                initBasicFunctions();
                
                // 初始化标签页
                initTabs();
                
                // 初始化钱包连接
                initWallet();
                
                // 初始化桥接功能
                initBridge();
                
                // 初始化质押功能
                initStaking();
                
                // 初始化区块浏览器
                initExplorer();
                
                // 初始化数据
                initData();
                
                console.log('页面初始化完成');
                
                // 显示欢迎消息
                setTimeout(() => {
                    showNotification('TTE Network已加载完成', 'success');
                }, 1000);
                
            } catch (error) {
                console.error('初始化错误:', error);
                showNotification('初始化错误: ' + error.message, 'error');
            }
        });

        // 初始化基本功能
        function initBasicFunctions() {
            // 语言切换
            const langTrigger = document.getElementById('langTrigger');
            if (langTrigger) {
                addEvent(langTrigger, 'click', function(e) {
                    e.stopPropagation();
                    const dropdown = document.getElementById('langDropdown');
                    if (dropdown) dropdown.classList.toggle('show');
                });
            }

            // 语言选项
            queryAll('.lang-option').forEach(option => {
                addEvent(option, 'click', function() {
                    const lang = this.getAttribute('data-lang');
                    if (lang !== currentLanguage) {
                        currentLanguage = lang;
                        updateLanguage();
                        queryAll('.lang-option').forEach(opt => opt.classList.remove('active'));
                        this.classList.add('active');
                        document.getElementById('langDropdown').classList.remove('show');
                        showNotification(currentLanguage === 'en' ? 'Language changed to English' : '语言已切换为中文', 'success');
                    }
                });
            });

            // 点击页面其他区域关闭语言下拉菜单
            addEvent(document, 'click', function(e) {
                if (!e.target.closest('.language-selector')) {
                    const dropdown = document.getElementById('langDropdown');
                    if (dropdown) dropdown.classList.remove('show');
                }
            });

            // 导航链接
            queryAll('.nav-link').forEach(link => {
                addEvent(link, 'click', function(e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href').substring(1);
                    
                    if (targetId === 'docs') {
                        showNotification(currentLanguage === 'en' 
                            ? 'Documentation page would open in a new tab' 
                            : '文档页面将在新标签页打开', 'info');
                        return;
                    }
                    
                    const tabBtn = document.querySelector(`.tab-btn[data-tab="${targetId}"]`);
                    if (tabBtn) {
                        tabBtn.click();
                        queryAll('.nav-link').forEach(navLink => navLink.classList.remove('active'));
                        this.classList.add('active');
                    }
                });
            });

            // 模态框关闭
            const closeButtons = ['closeChainModal', 'closeTokenModal', 'closeTxDetailModal'];
            closeButtons.forEach(id => {
                const btn = document.getElementById(id);
                if (btn) addEvent(btn, 'click', closeModal);
            });

            // 点击模态框背景关闭
            queryAll('.modal').forEach(modal => {
                addEvent(modal, 'click', function(e) {
                    if (e.target === this) closeModal();
                });
            });

            // 首页链接
            const homeLink = document.getElementById('homeLink');
            if (homeLink) {
                addEvent(homeLink, 'click', function() {
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                    query('.tab-btn[data-tab="bridge"]').click();
                });
            }
        }

        // 初始化标签页
        function initTabs() {
            const tabBtns = queryAll('.tab-btn');
            const tabContents = queryAll('.tab-content');
            
            tabBtns.forEach(btn => {
                addEvent(btn, 'click', function() {
                    const tabId = this.getAttribute('data-tab');
                    
                    // 更新激活状态
                    tabBtns.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    
                    // 显示对应内容
                    tabContents.forEach(content => {
                        content.style.display = 'none';
                    });
                    
                    const targetTab = document.getElementById(`${tabId}Tab`);
                    if (targetTab) {
                        targetTab.style.display = 'block';
                    }
                    
                    // 更新导航链接激活状态
                    queryAll('.nav-link').forEach(navLink => {
                        navLink.classList.remove('active');
                        if (navLink.getAttribute('href') === `#${tabId}`) {
                            navLink.classList.add('active');
                        }
                    });
                    
                    // 滚动到顶部
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                });
            });
        }

        // 初始化钱包
        function initWallet() {
            const connectWalletBtn = document.getElementById('connectWallet');
            const bridgeButton = document.getElementById('bridgeButton');
            
            if (!connectWalletBtn) return;
            
            addEvent(connectWalletBtn, 'click', function() {
                if (!isWalletConnected) {
                    // 模拟连接钱包
                    isWalletConnected = true;
                    walletAddress = '0x8a3F...c4B2';
                    connectWalletBtn.innerHTML = `<i class="fas fa-wallet"></i> ${walletAddress}`;
                    document.getElementById('walletText').textContent = walletAddress;
                    connectWalletBtn.style.background = 'rgba(108, 92, 231, 0.2)';
                    connectWalletBtn.style.border = '1px solid rgba(108, 92, 231, 0.3)';
                    
                    // 更新桥接按钮
                    if (bridgeButton) {
                        bridgeButton.innerHTML = `<i class="fas fa-link"></i> ${translations[currentLanguage].bridgeButtonTextConnected}`;
                        bridgeButton.disabled = false;
                    }
                    
                    showNotification(translations[currentLanguage].connected, 'success');
                } else {
                    // 模拟断开钱包
                    isWalletConnected = false;
                    walletAddress = null;
                    connectWalletBtn.innerHTML = `<i class="fas fa-wallet"></i> ${translations[currentLanguage].walletText}`;
                    document.getElementById('walletText').textContent = translations[currentLanguage].walletText;
                    connectWalletBtn.style.background = 'linear-gradient(135deg, #6C5CE7, #00CEC9)';
                    connectWalletBtn.style.border = 'none';
                    
                    // 更新桥接按钮
                    if (bridgeButton) {
                        bridgeButton.innerHTML = `<i class="fas fa-link"></i> ${translations[currentLanguage].bridgeButtonText}`;
                        bridgeButton.disabled = true;
                    }
                    
                    showNotification(currentLanguage === 'en' ? 'Wallet disconnected' : '钱包已断开', 'info');
                }
            });
        }

        // 初始化桥接功能
        function initBridge() {
            // 链选择
            const fromChainIcon = document.getElementById('fromChainIcon');
            const toChainIcon = document.getElementById('toChainIcon');
            const changeFromChainBtn = document.getElementById('changeFromChain');
            const changeToChainBtn = document.getElementById('changeToChain');
            
            if (fromChainIcon) addEvent(fromChainIcon, 'click', () => openChainModal('from'));
            if (toChainIcon) addEvent(toChainIcon, 'click', () => openChainModal('to'));
            if (changeFromChainBtn) addEvent(changeFromChainBtn, 'click', () => openChainModal('from'));
            if (changeToChainBtn) addEvent(changeToChainBtn, 'click', () => openChainModal('to'));
            
            // 代币选择
            const tokenSelector = document.getElementById('tokenSelector');
            if (tokenSelector) addEvent(tokenSelector, 'click', openTokenModal);
            
            // 交换链按钮
            const swapChainsBtn = document.getElementById('swapChains');
            if (swapChainsBtn) {
                addEvent(swapChainsBtn, 'click', function() {
                    const tempChain = currentFromChain;
                    currentFromChain = currentToChain;
                    currentToChain = tempChain;
                    updateChainUI();
                    updateBridgeInfo();
                    showNotification(currentLanguage === 'en' ? 'Chains swapped' : '链已交换', 'info');
                });
            }
            
            // 桥接金额输入
            const amountInput = document.getElementById('amountInput');
            if (amountInput) addEvent(amountInput, 'input', updateBridgeInfo);
            
            // 桥接按钮
            const bridgeButton = document.getElementById('bridgeButton');
            if (bridgeButton) addEvent(bridgeButton, 'click', handleBridge);
            
            // 设置和历史按钮
            const settingsBtn = document.getElementById('settingsBtn');
            const historyBtn = document.getElementById('historyBtn');
            
            if (settingsBtn) {
                addEvent(settingsBtn, 'click', function() {
                    showNotification(currentLanguage === 'en' ? 'Settings modal would open here' : '设置模态框将在此处打开', 'info');
                });
            }
            
            if (historyBtn) {
                addEvent(historyBtn, 'click', function() {
                    openBridgeHistoryModal();
                });
            }
        }

        // 初始化质押功能
        function initStaking() {
            // 质押金额按钮
            queryAll('.stake-btn').forEach(btn => {
                addEvent(btn, 'click', function() {
                    queryAll('.stake-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    const percent = parseInt(this.getAttribute('data-percent'));
                    const stakeAmountInput = document.getElementById('stakeAmountInput');
                    if (stakeAmountInput) {
                        stakeAmountInput.value = (currentToken.balance * percent / 100).toFixed(2);
                    }
                    updateStakingEstimate();
                });
            });
            
            // 质押期限选择
            queryAll('.duration-option').forEach(option => {
                addEvent(option, 'click', function() {
                    queryAll('.duration-option').forEach(opt => opt.classList.remove('selected'));
                    this.classList.add('selected');
                    stakingDuration = parseInt(this.getAttribute('data-months'));
                    
                    if (stakingDuration === 1) stakingMultiplier = 1;
                    if (stakingDuration === 3) stakingMultiplier = 1.4;
                    if (stakingDuration === 6) stakingMultiplier = 2;
                    if (stakingDuration === 12) stakingMultiplier = 3.2;
                    
                    updateStakingEstimate();
                    showNotification(
                        currentLanguage === 'en' 
                            ? `Staking duration set to ${stakingDuration} month(s)` 
                            : `质押期限设置为${stakingDuration}个月`, 
                        'info'
                    );
                });
            });
            
            // 质押金额输入
            const stakeAmountInput = document.getElementById('stakeAmountInput');
            if (stakeAmountInput) addEvent(stakeAmountInput, 'input', updateStakingEstimate);
            
            // 质押提交按钮
            const stakeSubmitBtn = document.getElementById('stakeSubmitBtn');
            if (stakeSubmitBtn) addEvent(stakeSubmitBtn, 'click', handleStaking);
            
            // 质押历史按钮
            const stakingHistoryBtn = document.getElementById('stakingHistoryBtn');
            if (stakingHistoryBtn) {
                addEvent(stakingHistoryBtn, 'click', function() {
                    openStakingHistoryModal();
                });
            }
            
            // 奖励按钮
            const rewardsBtn = document.getElementById('rewardsBtn');
            if (rewardsBtn) {
                addEvent(rewardsBtn, 'click', function() {
                    claimRewards();
                });
            }
        }

        // 初始化区块浏览器
        function initExplorer() {
            // 刷新区块按钮
            const refreshTransactionsBtn = document.getElementById('refreshTransactionsBtn');
            if (refreshTransactionsBtn) {
                addEvent(refreshTransactionsBtn, 'click', function() {
                    generateTransactions();
                    showNotification(currentLanguage === 'en' ? 'Transactions refreshed' : '交易已刷新', 'success');
                });
            }
            
            // 区块浏览器搜索按钮
            const explorerSearchBtn = document.getElementById('explorerSearchBtn');
            if (explorerSearchBtn) {
                addEvent(explorerSearchBtn, 'click', function() {
                    const searchTerm = document.getElementById('explorerSearch').value.trim();
                    if (searchTerm) {
                        handleBlockExplorerSearch(searchTerm);
                    } else {
                        showNotification(
                            currentLanguage === 'en' 
                                ? 'Please enter a search term' 
                                : '请输入搜索内容',
                            'error'
                        );
                    }
                });
            }
            
            // 区块浏览器搜索输入框回车键支持
            const explorerSearch = document.getElementById('explorerSearch');
            if (explorerSearch) {
                addEvent(explorerSearch, 'keypress', function(e) {
                    if (e.key === 'Enter') {
                        document.getElementById('explorerSearchBtn').click();
                    }
                });
            }
        }

        // 初始化数据
        function initData() {
            // 初始化UI
            updateLanguage();
            updateChainUI();
            updateTokenUI();
            updateBridgeInfo();
            updateStakingInfo();
            generateTransactions();
            generateBlocksTable();
            
            // 自动更新区块高度
            setInterval(() => {
                blockHeight++;
                const blockHeightEl = document.getElementById('blockHeight');
                const latestBlockEl = document.getElementById('latestBlock');
                if (blockHeightEl) blockHeightEl.textContent = blockHeight.toLocaleString();
                if (latestBlockEl) latestBlockEl.textContent = blockHeight.toLocaleString();
                
                // 更新区块列表
                if (blocks.length > 0) {
                    const newBlock = {
                        height: blockHeight,
                        txs: Math.floor(Math.random() * 30) + 20,
                        time: currentLanguage === 'en' ? 'Just now' : '刚刚',
                        validator: `Validator #${Math.floor(Math.random() * 2000)}`
                    };
                    blocks.unshift(newBlock);
                    if (blocks.length > 8) blocks.pop();
                    
                    // 如果当前显示的是区块浏览器，更新表格
                    if (document.getElementById('explorerTab').style.display !== 'none') {
                        generateBlocksTable();
                    }
                }
            }, 10000);
        }

        // 其他辅助函数保持不变（updateLanguage, updateChainUI, updateTokenUI等）
        // ... 保持原有辅助函数的实现 ...

    </script>
</body>
</html>